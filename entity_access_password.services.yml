services:
  entity_access_password.password_validator:
    class: Drupal\entity_access_password\Service\PasswordValidator
    arguments:
      - '@config.factory'
      - '@password'
      - '@entity_access_password.access_storage_manager'

  entity_access_password.access_storage_manager:
    class: Drupal\entity_access_password\Service\AccessStorageManager
    tags:
      - { name: 'service_collector', tag: 'entity_access_password_access_storage', call: 'addStorage' }

  entity_access_password.access_checker_manager:
    class: Drupal\entity_access_password\Service\AccessCheckerManager
    tags:
      - { name: 'service_collector', tag: 'entity_access_password_access_checker', call: 'addChecker' }

  entity_access_password.session_backend:
    class: Drupal\entity_access_password\Service\SessionBackend
    arguments:
      - '@session'
    tags:
      - { name: 'entity_access_password_access_storage', priority: 50 }
      - { name: 'entity_access_password_access_checker', priority: 50 }

  entity_access_password.password_access_manager:
    class: Drupal\entity_access_password\Service\PasswordAccessManager
#    arguments:
#      - '@entity_access_password.access_checker_manager'
